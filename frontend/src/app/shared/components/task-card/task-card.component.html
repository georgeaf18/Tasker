@if (variant === 'full') {
  <!-- Full variant - kanban board style -->
  <p-card styleClass="task-card" (click)="onCardClick()">
    <ng-template pTemplate="header">
      <div class="task-card-header">
        @if (task.channel) {
          <p-chip [label]="task.channel.name" styleClass="channel-chip" />
        }
        @if (task.isRoutine) {
          <i
            class="pi pi-refresh routine-icon"
            pTooltip="Routine Task"
            tooltipPosition="top"
          ></i>
        }
      </div>
    </ng-template>

    <div class="task-card-body">
      <h3 class="task-title">{{ task.title }}</h3>

      @if (task.taskTags && task.taskTags.length > 0) {
        <div class="task-tags">
          @for (taskTag of task.taskTags; track taskTag.tag.id) {
            <span
              class="task-tag-chip"
              [style.background-color]="taskTag.tag.color"
            >
              {{ taskTag.tag.name }}
            </span>
          }
        </div>
      }

      <div class="task-meta">
        <p-tag
          [value]="task.workspace"
          [severity]="getWorkspaceSeverity(task.workspace)"
          styleClass="workspace-tag"
        />

        @if (task.dueDate) {
          <span class="due-date">
            <i class="pi pi-calendar"></i>
            {{ formatDate(task.dueDate) }}
          </span>
        }
      </div>

      <!-- Subtasks Section -->
      <app-subtask-list [taskId]="task.id"></app-subtask-list>
    </div>
  </p-card>
} @else {
  <!-- Compact variant - backlog sidebar style -->
  <div class="task-list-item">
    <p-card
      [style]="draggable ? { cursor: 'grab' } : {}"
      (click)="onCardClick()"
      [pTooltip]="task.description || 'No description'"
      tooltipPosition="right"
    >
      <div class="task-card-content">
        <div class="task-title">{{ task.title }}</div>
        @if (task.dueDate) {
          <div class="task-meta">
            <i class="pi pi-calendar"></i>
            <span>{{ task.dueDate | date: 'short' }}</span>
          </div>
        }
        @if (task.isRoutine) {
          <div class="task-routine-badge">
            <i class="pi pi-sync"></i> Routine
          </div>
        }
      </div>
    </p-card>
  </div>
}
