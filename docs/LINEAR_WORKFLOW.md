# Linear Workflow - AI Agent Integration

## Overview

This project is built by AI coding agents (Claude Code). Every commit is tied to a Linear issue for:

- **Traceability:** Know which agent did what and why
- **Context:** Full issue description guides agent behavior
- **Automation:** Linear automatically links commits to issues
- **Progress tracking:** See which commits are part of which features

**Key Difference:** Agents work in parallel and complete tasks in hours, not days.

---

## Commit Message Format

Use Linear's issue identifier in your commit messages:

```
<type>: <description> (TASK-XX)

Optional body with more details.

Linear: TASK-XX
```

### Examples (AI-Generated):

```bash
# Good commit messages from AI agents
git commit -m "feat: setup PostgreSQL with Docker Compose (TASK-30)

Generated by: code-implementer agent
- postgres:16-alpine with volume persistence
- Environment variables configured
- Accessible on localhost:5432

Linear: TASK-30"

git commit -m "feat: implement Tasks REST API with Prisma (TASK-33)

Generated by: code-implementer agent
- Full CRUD operations with type safety
- Includes channel relations to prevent N+1
- 95% test coverage

Linear: TASK-33"

git commit -m "feat: build Kanban board with drag-and-drop (TASK-39)

Generated by: code-implementer agent (UI specialist)
- Angular CDK Drag & Drop integration
- Signal-based state updates
- Follows design system tokens

Linear: TASK-39"
```

---

## Commit Types

Follow conventional commits:

- **feat:** New feature
- **fix:** Bug fix
- **docs:** Documentation only changes
- **style:** Formatting, missing semi-colons, etc (no code change)
- **refactor:** Code change that neither fixes a bug nor adds a feature
- **perf:** Performance improvement
- **test:** Adding or updating tests
- **chore:** Changes to build process or auxiliary tools

---

## AI Agent Workflow

### How AI Agents Use Linear

**1. Orchestrator (Claude Code) picks issues to delegate:**

```typescript
// Launch multiple agents in parallel for independent tasks
Task: Launch code-implementer for TASK-30 (PostgreSQL setup)
Task: Launch code-implementer for TASK-36 (Angular config)
// Both run simultaneously, complete in ~20 minutes total
```

**2. Each agent:**

- Reads the Linear issue for acceptance criteria
- Implements the solution
- Writes tests
- Commits with proper issue reference
- Reports completion back to orchestrator

**3. Orchestrator verifies:**

- All acceptance criteria met
- Tests passing
- Type safety ensured
- Updates Linear issue status to "Done"

**4. Repeat for next batch of issues**

### Parallel Execution Pattern

**Traditional (human): Sequential - 7 days**

```
Day 1: Backend setup → Day 2: API → Day 3: Frontend...
```

**AI-Accelerated: Parallel - 4 hours**

```
Hour 1: Backend Agent + Frontend Agent (parallel)
Hour 2: UI Agent 1 + UI Agent 2 + UI Agent 3 (parallel)
Hour 3: Integration Agent
Hour 4: Deployment Agent + Docs Agent (parallel)
```

---

## Workflow: From Linear Issue to Commit (AI)

### 1. Orchestrator Reviews Linear Issue

**Claude Code (orchestrator) examines:**

- Issue TASK-30: Setup PostgreSQL with Docker Compose
- Acceptance criteria (5 checkboxes)
- Dependencies (none - can start immediately)
- Complexity (simple infrastructure task)

### 2. Orchestrator Launches Specialist Agent

```typescript
Task: "Implement TASK-30: Setup PostgreSQL with Docker Compose

Use code-implementer agent.

Create:
1. docker-compose.yml with postgres:16-alpine
2. Environment variables config
3. Volume mapping for persistence
4. .env.example for documentation

Acceptance criteria from Linear:
- [ ] docker-compose.yml created with postgres:16-alpine
- [ ] Environment variables configured (user, password, db name)
- [ ] Volume mapping for data persistence
- [ ] PostgreSQL accessible on port 5432
- [ ] Can connect with psql

Return: File contents and verification commands."
```

### 3. Agent Executes Task

**code-implementer agent:**

1. Creates `docker-compose.yml`
2. Creates `.env.example`
3. Verifies syntax
4. Tests with `docker-compose config`
5. Reports completion

### 4. Orchestrator Commits & Updates Linear

```bash
git add docker-compose.yml .env.example
git commit -m "feat: setup PostgreSQL with Docker Compose (TASK-30)

Generated by: code-implementer agent
- postgres:16-alpine with volume persistence
- Environment variables for user/password/db
- Accessible on localhost:5432
- All acceptance criteria met

Linear: TASK-30"

git push origin main
```

**Orchestrator then:**

- Updates TASK-30 status to "Done" in Linear
- Linear auto-links the commit
- Moves to next issue (TASK-31)

---

## Linear Automation

Linear automatically detects:

- **Commit references:** Mentions like `TASK-30` or `Linear: TASK-30`
- **Branch names:** Branches named `*/task-30-*`
- **PR links:** GitHub PRs linked to issues

### What Linear Shows:

- All commits that reference an issue
- GitHub PR status
- Git branch information
- Timeline of code changes

---

## Quick Reference Table

| Scenario         | Branch Name                 | Commit Message                                      |
| ---------------- | --------------------------- | --------------------------------------------------- |
| New feature      | `feature/task-33-tasks-api` | `feat: implement Tasks REST API (TASK-33)`          |
| Bug fix          | `fix/task-33-status-update` | `fix: correct task status update (TASK-33)`         |
| Multiple issues  | `feature/task-39-40-ui`     | `feat: build kanban and sidebar (TASK-39, TASK-40)` |
| Work in progress | `wip/task-42-layout`        | `wip: scaffold main layout (TASK-42)`               |

---

## Working on Multiple Issues

If a commit touches multiple issues:

```bash
git commit -m "feat: integrate kanban board with state service (TASK-38, TASK-39)

Connects KanbanBoardComponent with TaskStateService for
reactive task updates.

Linear: TASK-38, TASK-39"
```

---

## Issue Dependencies

Some issues depend on others. Check the **Dependencies** section in each issue:

**Example:** TASK-33 depends on TASK-32 (PrismaService)

1. Complete TASK-32 first
2. Commit and mark as done
3. Then start TASK-33

This ensures logical progression and avoids blockers.

---

## v0.1 Issue List (Created)

### Backend Infrastructure

- **TASK-30:** Setup PostgreSQL with Docker Compose
- **TASK-31:** Initialize Prisma and create database schema
- **TASK-32:** Create Prisma service and module in NestJS
- **TASK-33:** Implement Tasks REST API endpoints ⭐ (Critical)
- **TASK-34:** Implement Channels REST API endpoints
- **TASK-35:** Create database seed script with test data

### Frontend Infrastructure

- **TASK-36:** Configure Angular 20 with zoneless and Tailwind CSS ⭐ (Critical)
- **TASK-37:** Create Task API service with HttpClient
- **TASK-38:** Create signal-based Task state service ⭐ (Critical)

### Frontend Features

- **TASK-39:** Build Kanban board component with drag-and-drop ⭐ (Critical)
- **TASK-40:** Build backlog sidebar component ⭐ (Critical)
- **TASK-41:** Create task creation and edit form
- **TASK-42:** Build main app layout and routing ⭐ (Critical)
- **TASK-43:** Apply design system styling and accessibility

### Testing & Deployment

- **TASK-44:** Write E2E tests for critical user flows
- **TASK-45:** Create Docker setup and GitHub Actions deployment ⭐ (Critical)
- **TASK-46:** Update README and project documentation

**Total:** 17 issues
**Critical Path:** TASK-30 → 31 → 32 → 33 → 36 → 37 → 38 → 39 → 40 → 42 → 45

---

## Tips

### 1. Small, Focused Commits

Better to have multiple small commits per issue than one giant commit.

```bash
# Good
git commit -m "feat: create Prisma schema models (TASK-31)"
git commit -m "feat: generate initial migration (TASK-31)"
git commit -m "feat: configure Prisma client generation (TASK-31)"

# Less ideal
git commit -m "feat: complete all Prisma setup (TASK-31)"
```

### 2. Verify Before Committing

Check the issue's acceptance criteria before committing:

```bash
# Before committing, ask yourself:
# - Did I complete all acceptance criteria?
# - Are there tests?
# - Does it follow the design system?
```

### 3. Update Issue Comments

Add comments to Linear issues with:

- Implementation notes
- Challenges encountered
- Decisions made
- Screenshots (for UI work)

### 4. Close Issues When Done

Don't leave issues in "In Progress" if they're complete. Update status to "Done".

---

## GitHub Actions Integration

When you push with issue references, our CI will:

1. Run tests
2. Build Docker images (on main branch)
3. Deploy to production (on main branch)
4. Update Linear issue with deployment status

Make sure your commit message includes the issue number for full automation!

---

## Example: AI Orchestration for Phase 1 (Backend Foundation)

```typescript
// Orchestrator (Claude Code) strategy:
// Launch 1 agent for backend sequence since tasks are dependent

### Hour 1: Backend Foundation Agent

Agent: code-implementer (backend specialist)

Tasks (sequential due to dependencies):
1. TASK-30: Docker Compose + PostgreSQL (15 min)
2. TASK-31: Prisma schema + migrations (20 min)
3. TASK-32: PrismaService + PrismaModule (10 min)
4. TASK-33: Tasks REST API (25 min)
5. TASK-34: Channels REST API (15 min)
6. TASK-35: Database seed script (15 min)

Total: ~100 minutes (1.67 hours)

Commits generated:
- "feat: setup PostgreSQL with Docker Compose (TASK-30)"
- "feat: create Prisma schema and initial migration (TASK-31)"
- "feat: implement PrismaService for global DB access (TASK-32)"
- "feat: implement Tasks REST API with full CRUD (TASK-33)"
- "feat: implement Channels REST API (TASK-34)"
- "feat: add database seed script with 22 test tasks (TASK-35)"

All pushed to main, all Linear issues updated to "Done"

// While backend agent works, launch frontend agent in parallel:

### Hour 1 (Parallel): Frontend Foundation Agent

Agent: code-implementer (frontend specialist)

Tasks (can start immediately):
1. TASK-36: Angular zoneless + Tailwind + PrimeNG (30 min)
2. TASK-37: TaskApiService with HttpClient (20 min)
3. TASK-38: TaskStateService with signals (25 min)

Total: ~75 minutes (1.25 hours)

Commits generated:
- "feat: configure Angular 20 with zoneless and Tailwind (TASK-36)"
- "feat: create Task API service with HttpClient (TASK-37)"
- "feat: implement signal-based Task state service (TASK-38)"

// Result: Backend + Frontend foundations complete in ~100 minutes (parallel)
```

---

## Questions?

Check:

- [Linear Documentation](https://linear.app/docs)
- [Conventional Commits](https://www.conventionalcommits.org/)
- Project docs: `docs/VERSION_ROADMAP.md`

---

**Last Updated:** 2025-11-12
**Project:** Tasker v0.1 Alpha
